[TOC]

###  闭包：
#### 广义闭包：
- 可以访问非自身变量的函数。从这种角度来说，所有的函数都是闭包。
- 还有一种说法是，使用了非自身变量的函数，就是闭包。

```
    var globalA = 10;
    // 这个函数，可以使用非自身的变量，那么这是一个闭包。
    function fn() {
        console.log(globalA);
    }

    (function () {
        var val = 10;
        // 这个函数，可以使用非自身的变量，那么这是一个闭包。
        function f() {
            console.log(val);
        }
    }());
```

#### 狭义闭包：
- 可以访问非自身局部变量的函数。从这种角度来说，函数内的函数才是闭包。
- 还有一种说法是，使用了非自身局部变量的函数，就是闭包。
- 综上：可以访问非自身局部变量的函数就是闭包。函数内的函数就是闭包。

```
    var globalA = 10;
    // 这个函数，只能使用全局变量和自身的局部变量，所以不是闭包。
    function fn() {
        console.log(globalA);
    }

    (function () {
        var val = 10;
        // 这个函数可以使用自调函数中的局部变量，所以是闭包
        function f() {
            console.log(val);
        }
    }());
```

#### 闭包的特点：
- 利用闭包，可以在任何地方操作一个局部变量。

***

### 变量的生命周期：
>一个变量从定义开始，到释放结束，中间存活的过程就叫变量的生命周期。

#### 全局变量的生命周期：
- 从定义开始，到页面被关闭结束，就是全局变量的生命周期。
- 这个变量会一直存在，直到页面被关闭。


#### 局部变量的生命周期：
- 一般情况下从定义开始，到函数执行完毕结束，就是局部变量的生命周期
- 特殊情况下可以通过闭包，可以延长局部变量的生命周期。

```
    function fn() {
        var a = 1;
        // 当fn执行完毕后，因为匿名函数需要使用局部变量a,所以造成a变量没有释放。
        // 总结：闭包可以延长局部变量的生命周期
        return function () {
            console.log(a);
        };
    }

    var f = fn();
    f();
```
